#! perl -w
use strict;
use FindBin;                # where was script installed?
use lib $FindBin::Bin;      # use that dir for libs, too
use tmstub;
# Hot file handle magic...
select((select(STDERR), $| = 1)[0]);
select((select(STDOUT), $| = 1)[0]);


my @lines = split /^/, <<'EOF';

{ 0x00, 0x00, 0x0F, 0xF0, 0xFF, 0x00, 0x00, 0x00 }, /* '"' */
{ 0xE7, 0x0F, 0xF1, 0xEF, 0x00, 0xFF, 0x02, 0x60 }, /* '?' */
{ 0xC0, 0x3E, 0x78, 0x1F, 0x81, 0xF3, 0xC0, 0x20 }, /* ', 0x' */
{ 0x27, 0x04, 0xEC, 0x00, 0x87, 0x03, 0x9C, 0x00 }, /* '%' */
{ 0x83, 0x9C, 0x10, 0x0E, 0xCF, 0xF6, 0x78, 0x60 }, /* '&' */
{ 0x00, 0x00, 0x03, 0xF8, 0x00, 0x00, 0x00, 0x00 }, /* ''' */
{ 0x80, 0x00, 0x00, 0x04, 0xCF, 0x3C, 0xF8, 0x60 }, /* '(' */
{ 0xA1, 0xF3, 0xCE, 0x74, 0x00, 0x00, 0x00, 0x20 }, /* ')' */
{ 0x00, 0x9F, 0xF2, 0x19, 0x84, 0xFF, 0x90, 0x00 }, /* '*' */
{ 0x40, 0x0F, 0xF0, 0x0B, 0x00, 0xFF, 0x00, 0x00 }, /* '+' */
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x00 }, /* ' */
{ 0x00, 0x07, 0xE0, 0x00, 0x00, 0xFC, 0x00, 0x00 }, /* '-' */
{ 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20 }, /* '.' */
{ 0x00, 0x04, 0xEC, 0x00, 0x00, 0x03, 0x9C, 0x00 }, /* '/' */

{ 0xA1, 0xF3, 0xCE, 0x74, 0xCF, 0x3C, 0xF8, 0x60 }, /* 0 */
{ 0xC0, 0x0C, 0x30, 0x0F, 0x48, 0xC3, 0x00, 0x20 }, /* 1 */
{ 0xA7, 0x04, 0xEE, 0x74, 0x48, 0xE4, 0xFE, 0x60 }, /* 2 */
{ 0xA1, 0xF6, 0xEE, 0x74, 0x48, 0xC0, 0x08, 0x60 }, /* 3 */
{ 0x67, 0xFB, 0xDF, 0x38, 0x00, 0xE7, 0xF0, 0x00 }, /* 4 */
{ 0xA1, 0xF6, 0x61, 0xE4, 0xFF, 0xFC, 0x0E, 0x60 }, /* 5 */
{ 0xA1, 0xF6, 0x60, 0x64, 0xCF, 0xFC, 0xF8, 0x60 }, /* 6 */
{ 0xC0, 0x0C, 0xEF, 0xF4, 0x78, 0x03, 0x00, 0x20 }, /* 7 */
{ 0xA1, 0xF6, 0xEE, 0x74, 0xCF, 0xF4, 0xF8, 0x60 }, /* 8 */
{ 0xA1, 0xF7, 0xEE, 0x74, 0xCF, 0xF0, 0x08, 0x60 }, /* 9 */

{ 0x40, 0x08, 0x10, 0x0B, 0x00, 0x03, 0x00, 0x00 }, /* ':' */
{ 0x00, 0x00, 0x00, 0x00, 0x87, 0x00, 0xFC, 0x00 }, /* ' */
{ 0x03, 0x9C, 0x13, 0x38, 0x00, 0xE2, 0x00, 0x00 }, /* '<' */
{ 0x40, 0xF8, 0x1E, 0x1B, 0x87, 0x03, 0xF0, 0x00 }, /* '=' */
{ 0x00, 0x04, 0x70, 0x01, 0x9C, 0x83, 0x9C, 0x00 }, /* '>' */
{ 0x80, 0x04, 0x32, 0x7C, 0x48, 0xC0, 0x00, 0x20 }, /* '?' */
{ 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0 }, /* '#' */

{ 0x27, 0xF7, 0xEE, 0x74, 0xCF, 0xFC, 0xFE, 0x40 }, /* A */
{ 0xA1, 0xF6, 0xEE, 0x74, 0xFF, 0xFC, 0xFE, 0x60 }, /* B */
{ 0xA7, 0x00, 0x01, 0xE4, 0xCF, 0x3C, 0xF8, 0x60 }, /* C */
{ 0xA1, 0xF3, 0xCE, 0x74, 0xFF, 0x3C, 0xFE, 0x60 }, /* D */
{ 0xA7, 0x04, 0x21, 0xE4, 0xFF, 0xFC, 0xFE, 0x60 }, /* E */
{ 0x00, 0x04, 0x21, 0xE4, 0xFF, 0xFC, 0xFE, 0x40 }, /* F */
{ 0xA7, 0xF3, 0xE1, 0xE4, 0xCF, 0x3C, 0xF8, 0x60 }, /* G */
{ 0x27, 0xF7, 0xEF, 0xF0, 0xFF, 0xFC, 0xFE, 0x40 }, /* H */
{ 0xE7, 0x0C, 0x31, 0xEF, 0x78, 0xC3, 0x0E, 0x60 }, /* I */
{ 0xA1, 0xF3, 0xCF, 0xF0, 0x00, 0x00, 0xF8, 0x60 }, /* J */
{ 0x03, 0x9C, 0x13, 0x38, 0xFF, 0xFE, 0xFE, 0x40 }, /* K */
{ 0xA7, 0x00, 0x00, 0x00, 0xFF, 0x3C, 0xFE, 0x60 }, /* L */
{ 0x27, 0xF3, 0xDF, 0x39, 0x9F, 0xBC, 0xFE, 0x40 }, /* M */
{ 0x03, 0xFF, 0xFF, 0xF1, 0x9F, 0xFE, 0xFE, 0x40 }, /* N */
{ 0xA1, 0xF3, 0xCE, 0x74, 0xCF, 0x3C, 0xF8, 0x60 }, /* O */
{ 0x00, 0x04, 0xEE, 0x74, 0xFF, 0xFC, 0xFE, 0x40 }, /* P */
{ 0xA3, 0xFB, 0xCE, 0x74, 0xCF, 0x3E, 0xF8, 0x60 }, /* Q */
{ 0x03, 0x9C, 0xEE, 0x74, 0xFF, 0xFE, 0xFE, 0x40 }, /* R */
{ 0xA1, 0xF6, 0x60, 0x64, 0xCF, 0xF0, 0x08, 0x60 }, /* S */
{ 0xC0, 0x0C, 0x31, 0xEF, 0x78, 0xC3, 0x00, 0x20 }, /* T */
{ 0xA1, 0xF3, 0xCF, 0xF0, 0xFF, 0x3C, 0xF8, 0x60 }, /* U */
{ 0xC0, 0x3B, 0xCF, 0xF0, 0xFF, 0x3D, 0xC0, 0x00 }, /* V */
{ 0x03, 0xFF, 0xCF, 0xF0, 0xFF, 0x3F, 0xFC, 0x00 }, /* W */
{ 0x03, 0x9C, 0x33, 0x39, 0x9C, 0xC3, 0x9C, 0x00 }, /* X */
{ 0xC0, 0x0C, 0xEF, 0xF0, 0xFF, 0xF3, 0x00, 0x20 }, /* Y */
{ 0xA7, 0x00, 0x13, 0xFC, 0x78, 0xE4, 0xFE, 0x60 }, /* Z */

{ 0xE7, 0x0C, 0x31, 0xEF, 0x00, 0xC3, 0x00, 0x20 }, /* '[' */
{ 0x03, 0x9C, 0x00, 0x00, 0x03, 0x72, 0x00, 0x00 }, /* '\' */
{ 0xC0, 0x0C, 0x30, 0x0F, 0x78, 0xC3, 0x0E, 0x60 }, /* ']' */
{ 0xC0, 0x6E, 0x70, 0x00, 0x00, 0xE7, 0x60, 0x20 }, /* '^' */
{ 0xA7, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x60 }, /* '_' */
{ 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0 }, /* '`' */

{ 0xA3, 0xF7, 0xF8, 0x1B, 0x81, 0x13, 0x98, 0x60 }, /* a */
{ 0xA1, 0xF3, 0xD8, 0x1B, 0xFF, 0x3C, 0xFE, 0x60 }, /* b */
{ 0xA1, 0x00, 0x18, 0x1B, 0x81, 0x3C, 0xF8, 0x60 }, /* c */
{ 0xA7, 0xF3, 0xDF, 0xFB, 0x81, 0x3C, 0xF8, 0x60 }, /* d */
{ 0xA1, 0x04, 0xF8, 0x1B, 0x81, 0x3F, 0xF8, 0x60 }, /* e */
{ 0x00, 0x04, 0x20, 0x64, 0xCF, 0xFC, 0xFE, 0x40 }, /* f */
{ 0x6F, 0xFB, 0xD8, 0x1B, 0x81, 0x3F, 0xC1, 0x10 }, /* g */
{ 0x27, 0xF3, 0xD8, 0x1B, 0xFF, 0x3C, 0xFE, 0x40 }, /* h */
{ 0xE0, 0x0C, 0x30, 0x04, 0x00, 0xC3, 0x00, 0x20 }, /* i */
{ 0x2F, 0xF3, 0xC1, 0xE0, 0x00, 0x00, 0x01, 0x10 }, /* j */
{ 0x03, 0x9C, 0xEC, 0x00, 0xFF, 0x3E, 0xFE, 0x40 }, /* k */
{ 0xE0, 0x0C, 0x30, 0x0F, 0x00, 0xC3, 0x00, 0x20 }, /* l */
{ 0x27, 0xF7, 0xEC, 0x00, 0x03, 0x7E, 0xFE, 0x40 }, /* m */
{ 0x27, 0xF3, 0xD8, 0x1B, 0x87, 0x3C, 0xFE, 0x40 }, /* n */
{ 0xA1, 0xF3, 0xD8, 0x1B, 0x81, 0x3C, 0xF8, 0x60 }, /* o */
{ 0x40, 0x3B, 0xD8, 0x1B, 0x87, 0x3F, 0xFF, 0xC0 }, /* p */
{ 0x7F, 0xFB, 0xDE, 0x1B, 0x81, 0x3F, 0xC0, 0x00 }, /* q */
{ 0x00, 0x00, 0x1E, 0x18, 0x87, 0xFC, 0xFE, 0x40 }, /* r */
{ 0xA1, 0x9C, 0x18, 0x1B, 0x81, 0x72, 0x08, 0x60 }, /* s */
{ 0xA1, 0x00, 0x10, 0x0B, 0xFF, 0x3C, 0xF8, 0x60 }, /* t */
{ 0xA7, 0xF3, 0xCE, 0x10, 0x87, 0x3C, 0xF8, 0x60 }, /* u */
{ 0xC0, 0x3B, 0xCE, 0x10, 0x87, 0x3D, 0xC0, 0x00 }, /* v */
{ 0x03, 0xFF, 0xCE, 0x10, 0x87, 0x3F, 0xFC, 0x00 }, /* w */
{ 0x03, 0x9C, 0xEC, 0x00, 0x03, 0x73, 0x9C, 0x00 }, /* x */
{ 0x6F, 0xFB, 0xCE, 0x10, 0x87, 0x3F, 0xC1, 0x10 }, /* y */
{ 0xA7, 0x04, 0xFE, 0x1B, 0x87, 0x03, 0x9E, 0x60 }, /* z */
EOF


@lines = grep {chomp; /^{/} @lines;
#~ t d \@lines;

my $comment = "/* no comment! */";
foreach(@lines){
    #~ t "//  $_";
    /(\/\*.*)$/;
    $comment = $1; 
    #~ t $comment;
    s/^{//;
    s/}.*//;
    s/,//g;
    my @vals = split;
    # shift each byte right 4 bits!
    proc(@vals);
}

sub proc{
    my @vals = @_;
    my $pb = "00";
    my $newline = "    { ";
    foreach(@vals){
        s/^0x//;
        my $nb = substr($pb,1,1).substr($_,0,1);
        $pb = $_;
        $newline .= "0x". $nb . ", ";
    }
    $newline .= " }, $comment";
    t $newline;
}